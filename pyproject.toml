[build-system]
requires = ["poetry-core>=1.0.0"]
build-backend = "poetry.core.masonry.api"

###############################################################################
#
#                               POETRY
#
###############################################################################

[tool.poetry]
name = "{{cookiecutter.repository}}"
version = "0.0.0"
description = "..."
authors = ["{{cookiecutter.repository_owner}}"]
maintainers = ["{{cookiecutter.repository_owner}}"]
readme = "README.md"

[tool.poetry.dependencies]
python="^3.7"

# A list of all of the optional dependencies, some of which are included in the
# below `extras`. They can be opted in by apps.

# Tests
pytest = { version = "^7.1.1", optional = true}
pytest-cov = { version = "^4.0.0", optional = true}
pytest-xdist = { version = "^3.0", optional = true}
pytest-html = { version = "^3.1.1", optional = true}

# Linters
black = { version = "^22.3.0", optional = true }
mypy = { version = "^0.982", optional = true }

# Docs
mkdocs = { version = "^1.3.0", optional = true }
mkdocs-material = { version = "^8.2.13", optional = true }
mkdocstrings = { version = "^0.19.0", optional = true }
mkdocstrings-python = { version = "^0.7.0", optional = true }
mkdocs-literate-nav = { version = "^0.5.0", optional = true }
mkdocs-section-index = { version = "^0.3.4", optional = true }
mkdocs-gen-files = { version = "^0.4.0", optional = true }
mkdocs-minify-plugin = { version = "^0.6.0", optional = true }
interrogate = { version = "^1.5.0", optional = true }

# Release
python-semantic-release = { version = "^7.28.1", optional = true }

[tool.poetry.extras]
tests = [
  "pytest",
  "pytest-cov",
  "pytest-xdist",
  "pytest-html",
]

linters = [
  "black",
  "mypy"
]


docs = [
  "mkdocs",
  "mkdocs-material",
  "mkdocstrings",
  "mkdocstrings-python",
  "mkdocs-literate-nav",
  "mkdocs-section-index",
  "mkdocs-gen-files",
  "mkdocs-minify-plugin",
  "interrogate"
]

release = [
  "python-semantic-release"
]

all = [
  # Tests
  "pytest",
  "pytest-cov",
  "pytest-xdist",
  "pytest-html",
  # Linters
  "black",
  "mypy",
  # Documentation
  "mkdocs",
  "mkdocs-material",
  "mkdocstrings",
  "mkdocstrings-python",
  "mkdocs-literate-nav",
  "mkdocs-section-index",
  "mkdocs-gen-files",
  "mkdocs-minify-plugin",
  "interrogate",
  # Release
  "python-semantic-release"
]

###############################################################################
#
#                             COVERAGE SETTINGS
#
###############################################################################

[tool.coverage.run]
branch = true
relative_files = true

###############################################################################
#
#                              DOCS COVERAGE
#
###############################################################################

[tool.interrogate]
verbose = 2
fail-under = 100

###############################################################################
#
#                             SEMANTIC RELEASE
#
###############################################################################

[tool.semantic_release]
version_variable = [
  "src/{{cookiecutter.repository}}/_version.py:__version__",
]
version_toml = [
    "pyproject.toml:tool.poetry.version"
]
branch = "main"
major_on_zero = false

build_command = false
upload_to_repository = false
upload_to_release = false

commit_author = "github-actions[bot] <github-actions[bot]@users.noreply.github.com>"
commit_subject = "feat: release {version}"
